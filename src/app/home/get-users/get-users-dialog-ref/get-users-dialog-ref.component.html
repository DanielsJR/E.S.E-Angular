<div *ngIf="data.type === 'detail'">
    <mat-toolbar color="primary">
        <img alt="logo" title="logo" src="assets/images/logos/ese-logo.png">
        <span class="spacer-r"></span>
        <h1 mat-dialog-title>Detalles de Usuario</h1>
    </mat-toolbar>

    <mat-list>
        <mat-list-item>
            <img matListAvatar [src]="sanitizer.bypassSecurityTrustResourceUrl('data:'+obj?.avatar.type+';base64,' + obj?.avatar.data)" alt="{{privilege}}">
            <h3 matLine> {{obj.firstName}} {{obj.lastName}} </h3>
            <p matLine>
                <span>{{obj.roles}}</span>
            </p>
        </mat-list-item>
        <mat-divider></mat-divider>
    </mat-list>

    <mat-dialog-content>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.username" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">view_column</i>Nombre de usuario
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.dni" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">person</i>RUT
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.birthday" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">person</i>Fecha de Nacimiento
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.gender" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">person</i>Sexo
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.mobile" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">description</i>Teléfono
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.email" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">description</i>Email
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.address" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">description</i>Dirección
            </mat-placeholder>
        </mat-form-field>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.commune" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">description</i>Comuna
            </mat-placeholder>
        </mat-form-field>

    </mat-dialog-content>

    <mat-dialog-actions>
        <mat-toolbar>
            <button type="button" mat-mini-fab color="primary" tabindex="1" (click)="cancel()" matTooltip="volver" cdkFocusRegionstart>
                <mat-icon>arrow_back</mat-icon>
            </button>
            <span class="spacer-r"></span>
            <button type="button" mat-raised-button color="accent" tabindex="2" (click)="detailEdit()">Editar</button>
            <button type="submit" mat-raised-button color="warn" tabindex="3" (click)="detailDelete()">Borrar</button>
        </mat-toolbar>
    </mat-dialog-actions>
</div>

<div *ngIf="data.type === 'create'">
    <form [formGroup]="createForm" (ngSubmit)="create()">

        <mat-toolbar color="primary">
            <img alt="logo" title="logo" src="assets/images/logos/ese-logo.png">
            <span class="spacer-r"></span>
            <h1 mat-dialog-title>Agregar {{privilege}}</h1>
        </mat-toolbar>

        <mat-list>
            <mat-list-item>
                <img matListAvatar src="assets/images/users/male-{{privilege}}.svg" alt="{{privilege}}">
                <h3 matLine> {{obj.firstName}} {{obj.lastName}} </h3>
                <p matLine>
                    <span>{{privilege | uppercase}}</span>
                </p>
            </mat-list-item>
            <mat-divider></mat-divider>
        </mat-list>

        <mat-dialog-content>

            <mat-form-field>
                <input matInput formControlName="firstName" required>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Nombres
                </mat-placeholder>
                <mat-error *ngIf="cFirstName.hasError('required')">Nombre de Usuario es
                    <strong>requerido</strong>.</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="lastName" required>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Apellidos
                </mat-placeholder>
                <mat-error *ngIf="cLastName.hasError('required')">Nombre de Usuario es
                    <strong>requerido</strong>.</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="dni">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>RUT
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput [matDatepicker]="picker" formControlName="birthday">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Fecha de Nacimiento
                </mat-placeholder>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-select formControlName="gender">
                    <mat-option *ngFor="let gender of genders" [value]="gender.value">
                        {{ gender.viewValue }}
                    </mat-option>
                </mat-select>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Sexo
                </mat-placeholder>
            </mat-form-field>



            <label for="avatar">Avatar</label>
            <input type="file" id="avatar" (change)="onFileChange($event)">
           

            <mat-form-field hintLabel="9 numeros">
                <input matInput formControlName="mobile" #input maxlength="9">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">phone</i>Teléfono
                </mat-placeholder>
                <mat-hint align="end">{{input.value?.length || 0}}/9</mat-hint>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="email">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Email
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="address">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Dirección
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <mat-select formControlName="commune">
                    <mat-option *ngFor="let commune of communes" [value]="commune.value">
                        {{ commune.viewValue }}
                    </mat-option>
                </mat-select>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Comuna
                </mat-placeholder>
            </mat-form-field>

        </mat-dialog-content>

        <mat-dialog-actions>
            <mat-toolbar>
                <button type="button" mat-mini-fab color="primary" tabindex="1" (click)="cancel()" matTooltip="volver" cdkFocusRegionstart>
                    <mat-icon>arrow_back</mat-icon>
                </button>
                <span class="spacer-r"></span>
                <button type="submit" mat-raised-button color="accent" tabindex="2" [disabled]="!createForm.valid">Agregar</button>
            </mat-toolbar>
        </mat-dialog-actions>
    </form>
</div>

<div *ngIf="data.type === 'edit'">
    <form [formGroup]="editForm" (ngSubmit)="save()">

        <mat-toolbar color="primary">
            <img alt="logo" title="logo" src="assets/images/logos/ese-logo.png">
            <span class="spacer-r"></span>
            <h1 mat-dialog-title>Editar Usuario</h1>
        </mat-toolbar>

        <mat-list>
            <mat-list-item>
                <img matListAvatar [src]="sanitizer.bypassSecurityTrustResourceUrl('data:'+obj?.avatar.type+';base64,' + obj?.avatar.data)" alt="{{privilege}}">
                <h3 matLine> {{obj.firstName}} {{obj.lastName}} </h3>
                <p matLine>
                    <span>{{obj.roles}}</span>
                </p>
            </mat-list-item>
        </mat-list>

        <mat-dialog-content>

            <mat-form-field>
                <input matInput formControlName="username">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Nombre de Usuario
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="firstName">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Nombres
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="lastName">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Apellidos
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="dni">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">person</i>RUT
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput [matDatepicker]="picker" formControlName="birthday">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">person</i>Fecha de Nacimiento
                </mat-placeholder>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-select formControlName="gender" [compareWith]="compareFn">
                    <mat-option *ngFor="let gender of genders" [value]="gender.viewValue">
                        {{ gender.viewValue }}
                    </mat-option>
                </mat-select>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Sexo
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="mobile">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Telefóno
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="email">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">description</i>Email
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <input matInput formControlName="address">
                <mat-placeholder>
                    <i class="material-icons app-input-icon">description</i>Dirección
                </mat-placeholder>
            </mat-form-field>

            <mat-form-field>
                <mat-select formControlName="commune" [compareWith]="compareFn">
                    <mat-option *ngFor="let commune of communes" [value]="commune.viewValue">
                        {{ commune.viewValue }}
                    </mat-option>
                </mat-select>
                <mat-placeholder>
                    <i class="material-icons app-input-icon">view_column</i>Comuna
                </mat-placeholder>
            </mat-form-field>

        </mat-dialog-content>

        <mat-dialog-actions>
            <mat-toolbar>
                <button type="button" mat-mini-fab color="primary" tabindex="1" (click)="cancel()" matTooltip="volver" cdkFocusRegionstart>
                    <mat-icon>arrow_back</mat-icon>
                </button>
                <span class="spacer-r"></span>
                <button type="submit" mat-raised-button color="accent" tabindex="2" [disabled]="!editForm.valid">Guardar</button>
            </mat-toolbar>
        </mat-dialog-actions>
    </form>
</div>

<div *ngIf="data.type === 'delete'">
    <mat-toolbar color="primary">
        <img alt="logo" title="logo" src="assets/images/logos/ese-logo.png">
        <span class="spacer-r"></span>
        <h1 mat-dialog-title>Borrar Usuario</h1>
    </mat-toolbar>

    <mat-list>
        <mat-list-item>
            <img matListAvatar [src]="sanitizer.bypassSecurityTrustResourceUrl('data:'+obj?.avatar.type+';base64,' + obj?.avatar.data)" alt="{{privilege}}">
            <h3 matLine> {{obj.firstName}} {{obj.lastName}} </h3>
            <p matLine>
                <span>{{obj.roles}}</span>
            </p>
        </mat-list-item>
        <mat-divider></mat-divider>
    </mat-list>

    <mat-dialog-content>

        <mat-form-field>
            <input matInput [(ngModel)]="obj.username" disabled>
            <mat-placeholder>
                <i class="material-icons app-input-icon">view_column</i>Nombre de usuario
            </mat-placeholder>
        </mat-form-field>

    </mat-dialog-content>

    <mat-dialog-actions>
        <mat-toolbar>
            <button type="button" mat-mini-fab color="primary" tabindex="1" (click)="cancel()" matTooltip="volver" cdkFocusRegionstart>
                <mat-icon>arrow_back</mat-icon>
            </button>
            <span class="spacer-r"></span>
            <button mat-raised-button color="warn" (click)="delete()" tabindex="2">Borrar</button>
        </mat-toolbar>
    </mat-dialog-actions>
</div>